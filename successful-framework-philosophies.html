<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=generator content="Hugo 0.74.1"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Saber v0.11.2"><meta name=author content="forecho"><meta name=keywords content="yii2,yii,炒美股,如何炒美股,美股入金 php,ios,ruby,python,swift,web development"><meta name=og:site_name content="forecho's Blog"><meta property="og:type" content="article"><meta property="title" content="塑造成功框架的哲学 - forecho's Blog"><meta property="og:title" content="塑造成功框架的哲学 - forecho's Blog"><meta property="twitter:title" content="塑造成功框架的哲学 - forecho's Blog"><meta name=description content="来源：Philosophies that Shaped Successful Frameworks

在过去的十年里我们看到了许多软件框架的出现，像 Spring 和 Ruby on Rails 已经是非常成功的框架了，掌握它们就意味着打开多扇就业机会的大门了。然而，对于每一个框架的成功，背后的大多数开发人员都不被人关注。2008年1月1日维基百科 列出了67个 Web 框架。然而今天，超过三分之二的消失在列表中或在三年内没有更新。作为 Yii 框架的创造者，我花了很多时间调查各种框架和理解为什么有些成功，有些失败了。我将描述我发现塑造成功框架的一些哲学。
为什么框架?
建立一个成功的框架，重要的是要了解什么是框架，开发人员为什么需要它们。
Douglas C. Schmidt 等人 认为框架作为一个集成的软件构件(如类、对象和组件)集合，为相关应用程序提供一个可重用的体系结构。根据这一定义，
框架应该是一个已完工的应用骨架组成可重用和可定制的组件。开发人员将扩展并定制一个框架通过提供他们的应用程序和领域特定逻辑来形成一个完整的应用程序。
一个框架典型的特征就是所谓的控制反转（inversion of control）。框架通常扮演着组织主程序的角色和调用应用程序代码。这里是反过来的控制流——它调用我而不是我调用框架。下图说明了框架之间的关系，函数库，和应用程序。注意框架通常提供现成的功能的库，以帮助开发人员构建应用程序更快。

开发人员使用框架最重要的原因是框架如何提高生产力和帮助提高代码质量。例如，现代的框架(例如，django)，经常提供代码生成工具或样板帮助立即启动新项目。此外，精心设计的框架内嵌安全保护措施，帮助预防开发人员犯典型的安全漏洞。
企业使用框架，还有一个额外的好处是，它可以应用在整个企业，帮助执行标准。框架提供了记录模式，详细的设计和实现的工具用于在所有应用程序之间提供一个一致的结构。例如，在 Capital One (译者注：薛强所在的公司) 我们开发一个 「Chassis」的框架作为一个集成的基础，统一了许多厂商和顾客公司内部开发应用程序的 API。
当然，并不是所有的开发人员喜欢使用框架。一些一致的抱怨包括陡峭的学习曲线，框架耦合性比较高，性能较低，等等。今天，在这篇文章中我将为你解释现代框架如何的解决这些问题，让大多数的这些抱怨不再适用。"><meta property="og:description" content="来源：Philosophies that Shaped Successful Frameworks

在过去的十年里我们看到了许多软件框架的出现，像 Spring 和 Ruby on Rails 已经是非常成功的框架了，掌握它们就意味着打开多扇就业机会的大门了。然而，对于每一个框架的成功，背后的大多数开发人员都不被人关注。2008年1月1日维基百科 列出了67个 Web 框架。然而今天，超过三分之二的消失在列表中或在三年内没有更新。作为 Yii 框架的创造者，我花了很多时间调查各种框架和理解为什么有些成功，有些失败了。我将描述我发现塑造成功框架的一些哲学。
为什么框架?
建立一个成功的框架，重要的是要了解什么是框架，开发人员为什么需要它们。
Douglas C. Schmidt 等人 认为框架作为一个集成的软件构件(如类、对象和组件)集合，为相关应用程序提供一个可重用的体系结构。根据这一定义，
框架应该是一个已完工的应用骨架组成可重用和可定制的组件。开发人员将扩展并定制一个框架通过提供他们的应用程序和领域特定逻辑来形成一个完整的应用程序。
一个框架典型的特征就是所谓的控制反转（inversion of control）。框架通常扮演着组织主程序的角色和调用应用程序代码。这里是反过来的控制流——它调用我而不是我调用框架。下图说明了框架之间的关系，函数库，和应用程序。注意框架通常提供现成的功能的库，以帮助开发人员构建应用程序更快。

开发人员使用框架最重要的原因是框架如何提高生产力和帮助提高代码质量。例如，现代的框架(例如，django)，经常提供代码生成工具或样板帮助立即启动新项目。此外，精心设计的框架内嵌安全保护措施，帮助预防开发人员犯典型的安全漏洞。
企业使用框架，还有一个额外的好处是，它可以应用在整个企业，帮助执行标准。框架提供了记录模式，详细的设计和实现的工具用于在所有应用程序之间提供一个一致的结构。例如，在 Capital One (译者注：薛强所在的公司) 我们开发一个 「Chassis」的框架作为一个集成的基础，统一了许多厂商和顾客公司内部开发应用程序的 API。
当然，并不是所有的开发人员喜欢使用框架。一些一致的抱怨包括陡峭的学习曲线，框架耦合性比较高，性能较低，等等。今天，在这篇文章中我将为你解释现代框架如何的解决这些问题，让大多数的这些抱怨不再适用。"><meta property="twitter:description" content="来源：Philosophies that Shaped Successful Frameworks

在过去的十年里我们看到了许多软件框架的出现，像 Spring 和 Ruby on Rails 已经是非常成功的框架了，掌握它们就意味着打开多扇就业机会的大门了。然而，对于每一个框架的成功，背后的大多数开发人员都不被人关注。2008年1月1日维基百科 列出了67个 Web 框架。然而今天，超过三分之二的消失在列表中或在三年内没有更新。作为 Yii 框架的创造者，我花了很多时间调查各种框架和理解为什么有些成功，有些失败了。我将描述我发现塑造成功框架的一些哲学。
为什么框架?
建立一个成功的框架，重要的是要了解什么是框架，开发人员为什么需要它们。
Douglas C. Schmidt 等人 认为框架作为一个集成的软件构件(如类、对象和组件)集合，为相关应用程序提供一个可重用的体系结构。根据这一定义，
框架应该是一个已完工的应用骨架组成可重用和可定制的组件。开发人员将扩展并定制一个框架通过提供他们的应用程序和领域特定逻辑来形成一个完整的应用程序。
一个框架典型的特征就是所谓的控制反转（inversion of control）。框架通常扮演着组织主程序的角色和调用应用程序代码。这里是反过来的控制流——它调用我而不是我调用框架。下图说明了框架之间的关系，函数库，和应用程序。注意框架通常提供现成的功能的库，以帮助开发人员构建应用程序更快。

开发人员使用框架最重要的原因是框架如何提高生产力和帮助提高代码质量。例如，现代的框架(例如，django)，经常提供代码生成工具或样板帮助立即启动新项目。此外，精心设计的框架内嵌安全保护措施，帮助预防开发人员犯典型的安全漏洞。
企业使用框架，还有一个额外的好处是，它可以应用在整个企业，帮助执行标准。框架提供了记录模式，详细的设计和实现的工具用于在所有应用程序之间提供一个一致的结构。例如，在 Capital One (译者注：薛强所在的公司) 我们开发一个 「Chassis」的框架作为一个集成的基础，统一了许多厂商和顾客公司内部开发应用程序的 API。
当然，并不是所有的开发人员喜欢使用框架。一些一致的抱怨包括陡峭的学习曲线，框架耦合性比较高，性能较低，等等。今天，在这篇文章中我将为你解释现代框架如何的解决这些问题，让大多数的这些抱怨不再适用。"><meta property="og:type" content="article"><title>塑造成功框架的哲学 - forecho's Blog</title><meta property="og:url" content="https://blog.forecho.com/successful-framework-philosophies.html"><meta property="og:image" content="https://avatars0.githubusercontent.com/u/1725326?s=460&v=4"><meta property="twitter:image" content="https://avatars0.githubusercontent.com/u/1725326?s=460&v=4"><link rel="shortcut icon" href="https://avatars0.githubusercontent.com/u/1725326?s=460&v=4" type=image/x-png><link href=https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css rel=stylesheet><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=//at.alicdn.com/t/font_1607597_jhmihcvh0tm.css><link href=/index.xml rel=alternate type=application/rss+xml title="forecho's Blog"><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=google-site-verification content="OMI81_SJiESxwq-Fr0CLleoF7EzVdRx7QTQlbAfCVdI"><meta name=baidu-site-verification content="WuHyHeOJtJ"></head><body class="bg-gray-100 text-gray-900 tracking-wider leading-normal"><nav id=header class="bg-white fixed w-full z-10 top-0 shadow"><div id=progress class="h-1 z-20 top-0" style="background:linear-gradient(to right,#4dc0b5 var(--scroll),transparent 0)"></div><div class="w-full container mx-auto flex flex-wrap items-center justify-between my-1"><div class=pl-4><a class="text-gray-900 text-base no-underline hover:no-underline font-bold text-xl" href=/>forecho's Blog</a></div><div class="block lg:hidden pr-4"><button id=nav-toggle class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-900 hover:border-teal-500 appearance-none focus:outline-none"><svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg></button></div><div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-gray-100 md:bg-transparent z-20" id=nav-content><ul class="list-reset lg:flex justify-end flex-1 items-center"><li class=mr-3><a href=/ class="inline-block py-2 px-2 text-gray-700 font-bold no-underline">首页</a></li><li class=mr-3><a href=/posts.html class="inline-block py-2 px-2 text-gray-700 font-bold no-underline">文章归档</a></li><li class=mr-3><a href=/about.html class="inline-block py-2 px-2 text-gray-700 font-bold no-underline">关于我</a></li><li class=mr-3><a href=/friendship-links/ class="inline-block py-2 px-2 text-gray-700 font-bold no-underline">联盟链接</a></li></ul></div></div></nav><div id=container class="container w-full flex flex-wrap mx-auto px-2 lg:pt-12 mt-10"><section class="w-full lg:w-3/4 xl:w-3/4"><div class="px-8 py-6 mt-6 lg:mt-0 leading-normal rounded shadow bg-white"><div><h1 class="font-bold break-normal text-gray-800 pt-2 pb-2 text-2xl lg:text-3xl"><a href=https://blog.forecho.com/successful-framework-philosophies.html title=塑造成功框架的哲学>塑造成功框架的哲学</a></h1><p class="mb-1 text-sm text-gray-500"><span title="2015-12-27 22:37:00 +0800"><i class="iconfont icon-calendar" aria-hidden=true></i>27 Dec 2015</span>
<span class="hidden xl:inline-block">|
<i class="iconfont icon-book"></i>3891 字</span>
<span class="hidden xl:inline-block">|
<i class="iconfont icon-clock-o"></i>8 分钟读完</span></p></div><div class=md:hidden><p class="text-base font-bold py-2 yg:pb-6 text-gray-700">文章目录</p><div class="sticky text-sm" style=top:6em id=menu-content><nav id=TableOfContents><ul><li><a href=#为什么框架>为什么框架?</a></li><li><a href=#哲学>哲学</a></li><li><a href=#越简单越好>越简单越好</a></li><li><a href=#整体设计是最糟糕的>整体设计是最糟糕的</a></li><li><a href=#一致性>一致性</a></li><li><a href=#显示大于隐式>显示大于隐式</a></li><li><a href=#约定大于配置>约定大于配置</a></li><li><a href=#总结>总结</a></li></ul></nav></div></div><div class=post-content><blockquote><p>来源：<a href=http://www.capitalone.io/blog/successful-framework-philosophies/>Philosophies that Shaped Successful Frameworks</a></p></blockquote><p>在过去的十年里我们看到了许多软件框架的出现，像 <a href=http://spring.io/>Spring</a> 和 <a href=http://rubyonrails.org/>Ruby on Rails</a> 已经是非常成功的框架了，掌握它们就意味着打开多扇就业机会的大门了。然而，对于每一个框架的成功，背后的大多数开发人员都不被人关注。2008年1月1日<a href=https://en.wikipedia.org/wiki/Software_framework>维基百科</a> 列出了67个 Web 框架。然而今天，超过三分之二的消失在列表中或在三年内没有更新。作为 Yii 框架的创造者，我花了很多时间调查各种框架和理解为什么有些成功，有些失败了。我将描述我发现塑造成功框架的一些哲学。</p><h2 id=为什么框架>为什么框架?</h2><p>建立一个成功的框架，重要的是要了解什么是框架，开发人员为什么需要它们。</p><p><a href="https://queue.acm.org/detail.cfm?id=1017005">Douglas C. Schmidt 等人</a> 认为框架作为一个集成的软件构件(如类、对象和组件)集合，为相关应用程序提供一个可重用的体系结构。根据这一定义，
框架应该是一个已完工的应用骨架组成可重用和可定制的组件。开发人员将扩展并定制一个框架通过提供他们的应用程序和领域特定逻辑来形成一个完整的应用程序。</p><p>一个框架典型的特征就是所谓的控制反转（<a href=http://martinfowler.com/bliki/InversionOfControl.html>inversion of control</a>）。框架通常扮演着组织主程序的角色和调用应用程序代码。这里是反过来的控制流——它调用我而不是我调用框架。下图说明了框架之间的关系，函数库，和应用程序。注意框架通常提供现成的功能的库，以帮助开发人员构建应用程序更快。</p><p><img src=https://segmentfault.com/img/bVtewA alt></p><p>开发人员使用框架最重要的原因是框架如何提高生产力和帮助提高代码质量。例如，现代的框架(例如，django)，经常提供代码生成工具或样板帮助立即启动新项目。此外，精心设计的框架内嵌安全保护措施，帮助预防开发人员犯典型的安全漏洞。</p><p>企业使用框架，还有一个额外的好处是，它可以应用在整个企业，帮助执行标准。框架提供了记录模式，详细的设计和实现的工具用于在所有应用程序之间提供一个一致的结构。例如，在 Capital One (译者注：薛强所在的公司) 我们开发一个 「Chassis」的框架作为一个集成的基础，统一了许多厂商和顾客公司内部开发应用程序的 API。</p><p>当然，并不是所有的开发人员喜欢使用框架。一些一致的抱怨包括陡峭的学习曲线，框架耦合性比较高，性能较低，等等。今天，在这篇文章中我将为你解释现代框架如何的解决这些问题，让大多数的这些抱怨不再适用。</p><h2 id=哲学>哲学</h2><p>像任何一个产品一样，一个框架的成功取决于许多因素，包括其背后的思想，代码质量、文档，周围社区，营销，支持，等等。在我看来，特别重要的一项是考虑当一个框架被设计和开发的哲学。</p><p>好久以前 Python 开发者 Tim Peters 开发 Python 时发表了被称为 <a href=https://www.python.org/dev/peps/pep-0020/>Python 之禅</a> 的二十格言设计原则。『优美胜于丑陋，明了胜于晦涩，简洁胜于复杂……』他们鼓舞了许多<a href=https://redd.it/15itwl>类似的编程语言之禅（similar programming language zens）</a>，我发现这些格言是适用于框架设计的。根据我的框架开发经验，我特此冷凝和总结我认为任何成功的框架最重要的哲学。</p><ul><li>越简单越好</li><li>整体设计是最糟糕的</li><li>一致性</li><li>明了胜于晦涩</li><li>约定大于配置</li></ul><h2 id=越简单越好>越简单越好</h2><p>让开发人员转换一个新的框架从来都不是一件容易的事。然而，当开发人员选用框架，会作为重点依靠它来投资当前和未来的项目。此外，不想使用类库 - 开发人员可以学习一个 API 实现它 - 学习框架要求开发人员在投入实际使用之前要充分理解框架规则。因此，重要的是要确保简单的设计一个框架，使它更容易、有趣，而且容易去学习，接受和利用。</p><p>为了实现简单，一个框架应该强制执行一定数量的限制规则；同时，这些规则应以统一的方式设计和有良好的文档记录。框架执行更多的规则，陡峭的学习曲线，让开发人员很难接受。当规则是一致的，开发人员可以更快学习它们。没有文档，一个框架是无用的。因为没有人会花时间反向工程其规则。</p><p><a href=http://alirizhi.com/>Express.js framework</a> 框架路由语法规则的设计是一个很好的例子，一个非常受欢迎的 web 应用服务器框架。而路由在 web 应用程序中是一个重要的概念，是确定应用程序如何响应客户端请求一个特定的端点（一个HTTP方法和一个URI）。Express.js 介绍一个简单的规则来定义一个路线，<code>app.METHOD(PATH, HANDLER)</code>，<code>METHOD</code> 是一个 HTTP 请求方法(例如 GET、POST)，<code>PATH</code> 是服务器上的一个 URI 路径，<code>HANDLER</code> 是回调函数路线相匹配时要执行的。下面的代码片段显示了 Express.js 路由代码的样子。</p><div class=highlight><div style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=color:#069;font-weight:700>var</span> express <span style=color:#555>=</span> require(<span style=color:#c30>&#39;express&#39;</span>);
<span style=color:#069;font-weight:700>var</span> app <span style=color:#555>=</span> express();

<span style=color:#09f;font-style:italic>// accept homepage request 
</span><span style=color:#09f;font-style:italic></span>app.get(<span style=color:#c30>&#39;/&#39;</span>, <span style=color:#069;font-weight:700>function</span> (req, res) {
  res.send(<span style=color:#c30>&#39;Hello World!&#39;</span>);
});

<span style=color:#09f;font-style:italic>// accept POST request at /user 
</span><span style=color:#09f;font-style:italic></span>app.post(<span style=color:#c30>&#39;/user&#39;</span>, <span style=color:#069;font-weight:700>function</span> (req, res) {
  res.send(<span style=color:#c30>&#39;Got a PUT request at /user&#39;</span>);
});

<span style=color:#09f;font-style:italic>// accept DELETE request at /user 
</span><span style=color:#09f;font-style:italic></span>app.<span style=color:#069;font-weight:700>delete</span>(<span style=color:#c30>&#39;/user&#39;</span>, <span style=color:#069;font-weight:700>function</span> (req, res) {
  res.send(<span style=color:#c30>&#39;Got a DELETE request at /user&#39;</span>);
});
</code></pre></td></tr></table></div></div><p>上面的代码是不言自明的，因为它像是如何去看一个 HTTP 请求。因此,开发人员只需要很少的努力去学习就记住这个路由语法并且把它的实用性应用到自己的项目中。</p><h2 id=整体设计是最糟糕的>整体设计是最糟糕的</h2><p>这里的术语「整体」指的是以一个以紧密耦合的代码库为基础构建的框架。web 框架刚开始流行时，他们往往是一个整体，因为他们的主要目标是提供全方位的快速的 web 应用程序开发。渐渐地，人们意识到整体框架有很多问题。例如，
即使改变是框架完全无关的一小部分需要重新测试和释放整个，从而导致应用程序的框架要重建。实际上，整体框架的中代码耦合使得它非常难以保持不同版本的向后兼容性。比如专业缓存、日志、数据库，人们变得不那么愿意被绑定到一个单一的整体框架。</p><p>现代框架往往是松散耦合的体系结构。全栈框架（例如 Spring ）已经演变成由松散耦合的组件可以单独使用或与第三方交换的框架。专门的框架是有明确的契约，以支持更好的互操作性，这使得应用程序不依赖于特定的框架。例如，一个非常受欢迎的 web 路由框架的特点是所谓『Sinatra-type 框架』，如 <a href=http://www.sinatrarb.com/>Sinatra</a>，<a href=http://expressjs.com/>Express.js</a> 和 <a href=http://martini.codegangsta.io/>Martini</a>。这些框架使用以下中间件管道架构支持请求路由和处理web应用程序。框架本身是非常小的,但开放式体系结构允许他们无限丰富的各种中间件组件。</p><p><img src=https://segmentfault.com/img/bVtewC alt></p><h2 id=一致性>一致性</h2><p>一致性意味着一个框架，坚持使用统一的设计，命名约定，代码风格，代码组织等等。一个一致性的框架将降低门槛，因为用户可以学习框架一个方面，并且应用相同的模式，去快速学习其他的结构。一致还可以帮助用户减少框架特征错别字或误用的可能性。</p><p>例如，当设计 Yii 框架的 query builder ，我们把一致性作为一个指导标准。查询构建器（query builder）允许您以编程方式创建一个数据库无关的 SQL 语句，避免 SQL 注入攻击。为了帮助用户更容易地记住它的 API ,我们介绍了链式接口和命名后相应的 SQL 关键字的方法。下面的代码片段显示了如何使用 SQL 语句查询构建器设计。</p><div class=highlight><div style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-php data-lang=php>(new Query())
    -&gt;select(&#39;id, email&#39;)
    -&gt;from(&#39;user&#39;)
    -&gt;orderBy(&#39;last_name, first_name&#39;)
    -&gt;limit(10)
    -&gt;all();
</code></pre></td></tr></table></div></div><p>上面的代码将生成和执行 MySQL 声明如下:</p><div class=highlight><div style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=color:#069;font-weight:700>SELECT</span> <span style=color:#555>`</span>id<span style=color:#555>`</span>, <span style=color:#555>`</span>email<span style=color:#555>`</span><span style=color:#069;font-weight:700>FROM</span> <span style=color:#555>`</span><span style=color:#069;font-weight:700>user</span><span style=color:#555>`</span><span style=color:#069;font-weight:700>ORDER</span> <span style=color:#069;font-weight:700>BY</span> <span style=color:#555>`</span>last_name<span style=color:#555>`</span>, <span style=color:#555>`</span>first_name<span style=color:#555>`</span><span style=color:#069;font-weight:700>LIMIT</span> <span style=color:#f60>10</span>
</code></pre></td></tr></table></div></div><p>正如您可以看到的，代码读取非常类似于你编写 SQL 语句。查询构建器之间的一致性和 SQL 语法很容易学习查询生成器。</p><h2 id=显示大于隐式>显示大于隐式</h2><p>关于编写自己的代码显式大于隐式，避免过多的使用 “自动魔法”，有两个原因坚持这种哲学。首先，显示的代码更容易理解和维护。由于代码是自解释的，维护人员可能不是代码的原作者，不需要来回跳转找到实际上执行的代码。其次，显示的代码不容易出错。虽然显示的可能需要编写更多的代码行，它减少了看似简单含蓄确笼罩着重要的代码的情况。</p><p>看看下面的两个 ORM (对象关系映射) 在 PHP 的代码。他们都希望实现『订单』数据库记录和『客户』DB 记录之间建立外键引用约束的相同的目标。</p><div class=highlight><div style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>$order-&gt;link(&#39;customer&#39;, $customer);
</code></pre></td></tr></table></div></div><p>与</p><div class=highlight><div style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f0f3f3;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>$order-&gt;customer = $customer;
</code></pre></td></tr></table></div></div><p>第一个版本是正常的方法调用。第二个版本看起来更酷，因为复杂的数据库连接操作可以通过一个看似简单的任务来完成。然而，这是一种错觉，第二个版本的简单性是由其他地方的的复杂性隐藏掩盖。例如，用户不得不通过某种形式的文档来学习这种特殊的赋值语法，以便在实践中使用它。因为链接操作看起来像一个正常分配时，用户可能会忘记处理由它引起的潜在的异常，从而导致整个程序发生故障。</p><p>事实上，Yii 的发展过程中，关于两个版本我们讨论了很多，并最终选定了第一个版本，它已收到投诉很少。</p><h2 id=约定大于配置>约定大于配置</h2><p>约定大于配置的概念已经存在好多年了。这个想法是一个框架应该采取坚持的公约，遵守约定同时仍然允许通过配置提高扩展性。决策的目标是减少开发人员需要做的数目，从而实现哲学# 1——简单性。</p><p>约定大于配置最早在 Ruby on Rails 框架中开始流行。Rails 提供一个 ActiveRecord 库，用类和数据库中的表之间的映射处理。按照惯例，表名是类名的多元化形式。因此，该类账户将有一个表称为帐户。如果该表不命名这种方式，用户将必须显式配置类名和表名称之间的映射关系。</p><p>许多 MVC 框架使用约定大于配置请求路由到特定的代码片断。如下图所示,<a href=http://sailsjs.org/>Sails.js framework</a> 框架使用的约定，其中的 <code>/we/say/hi</code> URL请求将被路由到<code>controllers/we</code>目录下 SayController 控制器类的<code>hi</code> 动作。按照本约定，开发人员不再需要对控制器的行为定义路由规则。但是，如果开发人员想要使用一个不同的路由规则，他们仍然可以通过显式绑定一个路由到一个控制器动作。</p><p><img src=https://segmentfault.com/img/bVtewD alt></p><p>约定优于配置有助于减少需要编写的代码量。然而，它会给开发人员需要遵守规则引入了额外的成本。同时，也往往与前面讨论的『显示大于隐式』的哲学相冲突。事实上，虽然早期版本的 Spring 框架使用了似的 Sails.js 路由约定，Spring 现在要求开发者通过注释明确指定映射。因此，当决定是否引入新的规则以支持约定大于配置，应采取明智的判断。</p><h2 id=总结>总结</h2><p>建设一个成功的框架是所有关于功能和简洁性之间的平衡。整个构建框架的过程中，取舍经常需要以坚守，并举例说明，上述哲学加以考虑。</p><p>有时候，你可能会遇到其中一个理念是与另一个直接冲突的情况。一致性是比简单更重要？在约定比显性更重要？在这种情况下，**请记住，一个框架的最终目标是简化开发人员的工作，并简化代码的编写进程。因此，保持它的简单和直接。**如果他们有明确性冲突，因为前者会带来隐藏的复杂性可以牺牲约定。同样，如果坚持一致性可以稍微违反严格会造成额外的并发症。</p><p>Posted Dec 15, 2015 by&mldr;</p><p><img src=https://segmentfault.com/img/bVtewE alt>
<strong>Qiang Xue</strong></p><p>软件工程师LEAD、技术人员</p><hr class="bg-gray-300 mt-8"><div class=pt-4><p class=text-center><button id=btn-donate class="px-5 py-2 inline-block rounded hover:bg-red-600 bg-red-400 text-white" for=reward>打赏</button></p><div class="flex flex-auto mt-2 mx-2 hidden" id=donate-image><div class="w-full px-2 my-2"><div class=bg-white><img class="h-48 shadow object-cover w-auto mx-auto" loading=lazy src=https://blog-1251237404.cos.ap-guangzhou.myqcloud.com/20190424153510.png alt=微信打赏><div class="text-center text-gray-500">微信打赏</div></div></div><div class="w-full px-2 my-2"><div class=bg-white><img class="h-48 shadow object-cover w-auto mx-auto" loading=lazy src=https://blog-1251237404.cos.ap-guangzhou.myqcloud.com/20190424153431.png alt=支付宝打赏><div class="text-center text-gray-500">支付宝打赏</div></div></div></div></div><div class="border-l-4 border-red-400 mx-auto bg-gray-200 text-gray-700 mt-5"><div class="pt-2 copyright"><ul class=list-none><li><strong>原文作者：</strong>
<a rel=author href=https://blog.forecho.com>forecho</a></li><li style=word-break:break-all><strong>原文链接：</strong>
<a href=https://blog.forecho.com/successful-framework-philosophies.html>https://blog.forecho.com/successful-framework-philosophies.html</a></li><li><strong>版权声明：</strong>本作品采用
<a rel=license href=https://creativecommons.org/licenses/by-nc/4.0/deed.zh>署名-非商业性使用 4.0 国际 (CC BY-NC 4.0)</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li></ul></div></div></div><div class="text-base md:text-sm text-gray-500 pt-6"><a class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 hover:bg-gray-300" href=https://blog.forecho.com/tags/%E7%BF%BB%E8%AF%91.html>#翻译</a>
<a class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 hover:bg-gray-300" href=https://blog.forecho.com/tags/%E6%80%9D%E8%80%83.html>#思考</a></div><p class="text-gray-500 text-sm text-right pt-1"><span id=busuanzi_container_page_pv>本文有 <span id=busuanzi_value_page_pv></span>次阅读</span></p></div><hr class="bg-gray-300 my-10"><div class="p-8 mt-6 lg:mt-0 rounded shadow bg-white"><h2 class="font-sans font-bold break-normal text-gray-700 px-2 pb-3 text-xl">相关文章</h2><li><a href=/coding-is-boring-unless.html class="underline text-orange-600">如何让团队里的工程师对工作不厌烦</a></li><li><a href=/why-open-source.html class="underline text-orange-600">为什么要开源</a></li><li><a href=/dynamic-properties-in-php-and-stdclass.html class="underline text-orange-600">PHP 中的动态属性和 StdClass</a></li><li><a href=/tian-fu-hai-shi-nu-li.html class="underline text-orange-600">天赋还是努力</a></li><li><a href=/dai-ma-bu-zhi-qian.html class="underline text-orange-600">代码不值钱</a></li></div></section><div class="hidden xl:text-sm xl:block xl:w-1/4 xl:px-6"><div class="lg:w-full mx-auto items-center justify-between"><div class="bg-white shadow rounded overflow-hidden"><div class="bg-cover bg-auto mx-auto w-32 h-32 mt-5 rounded-full" style="background-image:url(https://avatars0.githubusercontent.com/u/1725326?s=460&v=4)"></div><div class=p-4><p class="text-2xl text-center text-gray-900 pb-2">forecho</p><p class="text-sm text-center text-gray-700">把生命浪费在美好的事物上</p></div><div class="flex p-4 border-t text-sm border-gray-300 text-gray-700"><div class="flex-1 border-r border-gray-600"><p class=text-center><span class="text-gray-700 font-bold">346</span>
文章</p></div><div class="flex-1 text-center"><p class=text-center><span class="text-gray-700 font-bold">100</span>
标签</p></div></div><div class="px-4 pb-4 border-t border-gray-300"><div class="mt-6 pb-16 lg:pb-0 w-4/5 lg:w-full mx-auto flex flex-wrap items-center justify-between text-gray-500"><a href=//github.com/forecho class="hover:text-gray-900 p-1 text-2xl" target=_blank title=GitHub><i class="my-iconfont icon-social-github"></i></a><a href=//instagram.com/forecho class="hover:text-gray-900 p-1 text-2xl" target=_blank title=Instagram><i class="my-iconfont icon-instagram"></i></a><a href=//twitter.com/caizhenghai class="hover:text-gray-900 p-1 text-2xl" target=_blank title=Twitter><i class="my-iconfont icon-social-twitter"></i></a><a href=//douban.com/people/ipzone class="hover:text-gray-900 p-1 text-2xl" target=_blank title=Douban><i class="my-iconfont icon-social-douban"></i></a><a href=/atom.xml class="hover:text-gray-900 p-1 text-2xl" target=_blank title=RSS><i class="my-iconfont icon-feed"></i></a></div></div></div></div><div class="p-4 mt-2 lg:mt-4 rounded shadow bg-white"><h2 class="font-sans font-bold break-normal text-gray-700 px-2 pb-3 text-lg">热门文章</h2><li><a href=/financedeep-08.html class="underline text-orange-600 text-sm">【深度理财08】美港股打新哪家强</a></li><li><a href=/take-the-shenzhen-account-in-less-than-3-months.html class="underline text-orange-600 text-sm">用时不到3个月拿到深圳户口</a></li><li><a href=/how-do-i-invest-in-american-stocks.html class="underline text-orange-600 text-sm">我是怎么投资美股的</a></li></div><div class=profile-ads><div class="bg-white shadow"><img class="object-cover w-auto mx-auto mt-6" loading=lazy src=https://blog-1251237404.cos.ap-guangzhou.myqcloud.com/20190424153337.png title=微信：ipzone alt=微信：ipzone></div></div><div class="flex flex-col justify-between sticky top-0 pt-12 pb-4 -mt-10 text-gray-600"><div class="bg-white shadow rounded p-4 mt-5"><p class="text-base font-bold py-2 yg:pb-6 text-gray-700">文章目录</p><div class="sticky text-sm" style=top:6em id=menu-content><nav id=TableOfContents><ul><li><a href=#为什么框架>为什么框架?</a></li><li><a href=#哲学>哲学</a></li><li><a href=#越简单越好>越简单越好</a></li><li><a href=#整体设计是最糟糕的>整体设计是最糟糕的</a></li><li><a href=#一致性>一致性</a></li><li><a href=#显示大于隐式>显示大于隐式</a></li><li><a href=#约定大于配置>约定大于配置</a></li><li><a href=#总结>总结</a></li></ul></nav></div></div></div></div></div><footer class="bg-white border-t border-gray-400 shadow mt-10"><div class="container mx-auto flex py-8"><div class="w-full text-center text-gray-600"><p>&copy; 2020 <a class=text-gray-700 href=https://blog.forecho.com>forecho's Blog By forecho</a></p><p class=pt-1>Powered by <a rel="nofollow noreferer noopener" href=https://gohugo.io/ class=text-gray-700 target=_blank>Hugo</a>
Theme based on <a href=https://github.com/forecho/hugo-theme-echo class=text-gray-700 target=_blank>Echo</a></p><span id=busuanzi_container>访客数：<span id=busuanzi_value_site_uv></span> | 访问量 <span id=busuanzi_value_site_pv></span></span></div></div></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-75634412-1','auto');ga('send','pageview');}</script><script>window.onload=function(){document.getElementById("nav-toggle").onclick=function(){document.getElementById("nav-content").classList.toggle("hidden");};var donate=document.getElementById("btn-donate");if(donate){donate.onclick=function(){document.getElementById("donate-image").classList.remove("hidden");donate.classList.add("hidden");};}
var hostname=window.location.hostname;var divs=document.querySelectorAll('a[href^="http"]');[].forEach.call(divs,function(div){url=div.getAttribute("href");var domain=url.replace("http://","").replace("https://","").split(/[/?#:]/)[0];if(domain!==hostname){div.setAttribute("target","_blank");}});};var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight",progress=document.querySelector("#progress"),scroll;var scrollpos=window.scrollY;var header=document.getElementById("header");var navcontent=document.getElementById("nav-content");document.addEventListener("scroll",function(){scroll=((h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight))*100;progress.style.setProperty("--scroll",scroll+"%");scrollpos=window.scrollY;if(scrollpos>10){navcontent.classList.remove("bg-gray-100");}else{navcontent.classList.add("bg-gray-100");}});</script></body></html>